<template>
  <div class="tabs">
    <button
        class="tab"
        :class="{ 'active': tab.id === selectedTab }"
        v-for="tab in tabs"
        :key="tab.id"
        @click="openTab(tab)"
    >
      <span v-if="tab.id === 0" :class="{ 'fill-active': tab.id === selectedTab }">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_671_5509)">
            <path :class="{ 'fill-active': tab.id === selectedTab }" d="M9.83508 2.91667H7.00008V0.00933333L9.83508 2.91667ZM5.83341 4.08333V0H2.91675C2.45262 0 2.0075 0.184374 1.67931 0.512563C1.35112 0.840752 1.16675 1.28587 1.16675 1.75V11.0833H9.91675V4.08333H5.83341ZM11.0834 4.08917V12.2722H4.08341V14H12.8334V5.83333L11.0834 4.08917Z" fill="#8CA0B4"/>
          </g>
          <defs>
            <clipPath id="clip0_671_5509">
              <rect width="14" height="14" fill="white"/>
            </clipPath>
          </defs>
        </svg>
      </span>
      <span v-if="tab.id === 1" :class="{ 'fill-active': tab.id === selectedTab }">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_671_5513)">
            <path d="M7 0C5.61553 0 4.26216 0.410543 3.11101 1.17971C1.95987 1.94888 1.06266 3.04213 0.532846 4.32122C0.003033 5.6003 -0.13559 7.00777 0.134506 8.36563C0.404603 9.7235 1.07129 10.9708 2.05026 11.9497C3.02922 12.9287 4.2765 13.5954 5.63437 13.8655C6.99224 14.1356 8.3997 13.997 9.67879 13.4672C10.9579 12.9373 12.0511 12.0401 12.8203 10.889C13.5895 9.73785 14 8.38447 14 7C13.998 5.1441 13.2599 3.36479 11.9475 2.05247C10.6352 0.74015 8.8559 0.0020073 7 0V0ZM7.58334 6.92942C7.5834 7.0283 7.55832 7.12557 7.51047 7.2121C7.46261 7.29863 7.39354 7.37158 7.30975 7.42408L5.06975 8.82408C5.00464 8.86476 4.93215 8.89221 4.85643 8.90488C4.7807 8.91754 4.70323 8.91516 4.62842 8.89788C4.55362 8.8806 4.48295 8.84876 4.42045 8.80417C4.35795 8.75958 4.30485 8.70311 4.26417 8.638C4.22349 8.57289 4.19604 8.5004 4.18338 8.42467C4.17071 8.34895 4.17309 8.27147 4.19037 8.19667C4.20765 8.12186 4.23949 8.0512 4.28408 7.9887C4.32867 7.9262 4.38514 7.87309 4.45025 7.83242L6.41667 6.60625V4.08333C6.41667 3.92862 6.47813 3.78025 6.58752 3.67085C6.69692 3.56146 6.84529 3.5 7 3.5C7.15471 3.5 7.30309 3.56146 7.41248 3.67085C7.52188 3.78025 7.58334 3.92862 7.58334 4.08333V6.92942Z" fill="#8CA0B4"/>
          </g>
          <defs>
            <clipPath id="clip0_671_5513">
              <rect width="14" height="14" fill="white"/>
            </clipPath>
          </defs>
        </svg>
      </span>
      <span v-if="tab.id === 2" :class="{ 'fill-active': tab.id === selectedTab }"  >
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_671_5518)">
            <path d="M8.1665 4.08333V0.268333C8.70612 0.472112 9.19626 0.788265 9.60442 1.19583L11.6368 3.22933C12.0448 3.63701 12.3612 4.12702 12.5648 4.66667H8.74984C8.59513 4.66667 8.44675 4.60521 8.33736 4.49581C8.22796 4.38642 8.1665 4.23804 8.1665 4.08333ZM12.8332 6.11625V11.0833C12.8322 11.8566 12.5247 12.5979 11.9779 13.1447C11.4311 13.6915 10.6898 13.9991 9.9165 14H4.08317C3.30991 13.9991 2.56858 13.6915 2.0218 13.1447C1.47502 12.5979 1.16743 11.8566 1.1665 11.0833V2.91667C1.16743 2.1434 1.47502 1.40208 2.0218 0.855295C2.56858 0.308514 3.30991 0.00092625 4.08317 0L6.71692 0C6.812 0 6.90592 0.00758333 6.99984 0.014V4.08333C6.99984 4.54746 7.18421 4.99258 7.5124 5.32077C7.84059 5.64896 8.28571 5.83333 8.74984 5.83333H12.8192C12.8256 5.92725 12.8332 6.02117 12.8332 6.11625ZM9.7555 8.34808C9.64887 8.23615 9.50216 8.17113 9.3476 8.1673C9.19305 8.16347 9.0433 8.22115 8.93125 8.32767L6.83125 10.3291C6.77514 10.3855 6.70807 10.4299 6.63417 10.4594C6.56027 10.489 6.48111 10.5031 6.40155 10.5009C6.32199 10.4987 6.24371 10.4803 6.17155 10.4467C6.09938 10.4132 6.03485 10.3652 5.98192 10.3057L5.055 9.48092C4.99778 9.4299 4.93107 9.39065 4.85868 9.36541C4.78629 9.34018 4.70963 9.32945 4.63309 9.33383C4.47852 9.3427 4.33379 9.4126 4.23075 9.52817C4.17974 9.58539 4.14049 9.6521 4.11525 9.72449C4.09001 9.79689 4.07928 9.87354 4.08367 9.95008C4.09253 10.1047 4.16244 10.2494 4.278 10.3524L5.17867 11.1539C5.50515 11.4805 5.94745 11.6648 6.40921 11.6666C6.87097 11.6685 7.31474 11.4877 7.64384 11.1638L9.73509 9.17233C9.84702 9.06569 9.91204 8.91898 9.91587 8.76443C9.9197 8.60988 9.86202 8.46013 9.7555 8.34808Z" fill="#8CA0B4"/>
          </g>
          <defs>
            <clipPath id="clip0_671_5518">
             <rect width="14" height="14" fill="white"/>
            </clipPath>
          </defs>
        </svg>
      </span>
      <span>{{ tab.title }}</span>
    </button>
  </div>
</template>

<script lang="ts" setup>
import { ref, watch } from 'vue'
import { useRouter } from 'vue-router'

const selectedTab = ref(0)
const tabs = [
  { title: 'Черновики', link: '/drafts', id: 0 },
  { title: 'Запланированные', link: '/planned', id: 1 },
  { title: 'Отправленные', link: '/sent', id: 2 },
]

const router = useRouter()

const openTab = (tab: any) => {
  selectedTab.value = tab.id
  router.push(tab.link)
}

watch(router.currentRoute, () => {
  switch (router.currentRoute.value.path) {
    case '/drafts':
      selectedTab.value = 0
      break
    case '/planned':
      selectedTab.value = 1
      break
    case '/sent':
      selectedTab.value = 2
      break
    default:
      selectedTab.value = 0
  }
})
</script>

<style lang="scss" scoped>
@import "distrHeaderTabs";
</style>